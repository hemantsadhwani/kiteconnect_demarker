# Stop Loss Grid Search Configuration
# Optimizes Entry2 STOP_LOSS_PRICE_THRESHOLD and STOP_LOSS_PERCENT in backtesting_config.yaml
# Target: DYNAMIC_ATM (all trades, no market sentiment filter)

# Grid Search Parameters
GRID_SEARCH:
  # STOP_LOSS_PRICE_THRESHOLD: [high_threshold, low_threshold]
  # High threshold range (for first value in list)
  STOP_LOSS_PRICE_THRESHOLD_HIGH:
    MIN: 80
    MAX: 180
    STEP: 10
  
  # Low threshold range (for second value in list)
  STOP_LOSS_PRICE_THRESHOLD_LOW:
    MIN: 40
    MAX: 80
    STEP: 10
  
  # STOP_LOSS_PERCENT ranges
  STOP_LOSS_PERCENT_ABOVE_THRESHOLD:
    MIN: 5.5
    MAX: 6.5
    STEP: 0.5
  
  STOP_LOSS_PERCENT_BETWEEN_THRESHOLD:
    MIN: 6.5
    MAX: 7.5
    STEP: 0.5
  
  STOP_LOSS_PERCENT_BELOW_THRESHOLD:
    MIN: 7.0
    MAX: 8.5
    STEP: 0.5

# Optimization Target
OPTIMIZATION:
  # Primary metric to optimize for
  PRIMARY_METRIC: "composite"  # Options: filtered_pnl, win_rate, composite
  
  # Composite scoring weights (if PRIMARY_METRIC is "composite")
  # Goal: Improve P&L and win rate
  COMPOSITE_WEIGHTS:
    FILTERED_PNL: 0.5      # Weight on P&L
    WIN_RATE: 0.5          # Weight on win rate
    TRADE_REDUCTION: 0.0   # No weight on trade reduction (not optimizing for this)
  
  # Strike type to optimize for (DYNAMIC_ATM only - no market sentiment filter)
  STRIKE_TYPE: "DYNAMIC_ATM"  # Only DYNAMIC_ATM is optimized

# Execution Settings
EXECUTION:
  # Timeout for workflow execution (seconds)
  # Full workflow can take 30-60 minutes depending on data size
  WORKFLOW_TIMEOUT: 3600  # 1 hour default
  
  # Restore backtesting_config.yaml after completion
  RESTORE_CONFIG: true
  
  # Clean up backup files after successful completion
  CLEANUP_BACKUPS: true  # Set to false to keep backup files

# Logging
LOGGING:
  LEVEL: "INFO"  # Options: DEBUG, INFO, WARNING, ERROR
  SHOW_PROGRESS: true
  LOG_FILE: "grid_search.log"  # Log file name (saved in results directory)
